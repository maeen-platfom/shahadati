# Sprint 2 - ุฑูุน ุงูููุงูุจ ููุธุงู ุงูุชุญุฏูุฏ ุงูุชูุงุนูู

## โ ุงูุญุงูุฉ: ููุชูู ุจูุฌุงุญ

ุชู ุฅููุงู Sprint 2 ุจูุฌุงุญ ูู 2025-10-30ุ ูุน ุชูููุฐ ุฌููุน ุงููุธุงุฆู ุงููุทููุจุฉ ูุงุฎุชุจุงุฑ ุงูุจูุงุก ุจูุฌุงุญ.

---

## ๐ฆ ุงูููููุงุช ุงููููุฐุฉ

### 1. ุฃููุงุน ุงูุจูุงูุงุช (Types)
**ุงูููู:** `types/field.ts`

```typescript
export type FieldType = 'student_name' | 'date' | 'certificate_number' | 'custom';

export interface TemplateField {
  id: string;
  type: FieldType;
  label: string;
  x: number;
  y: number;
  xPercent: number;
  yPercent: number;
  fontFamily: string;
  fontSize: number;
  fontColor: string;
  fontWeight: 'normal' | 'bold';
  textAlign: 'left' | 'center' | 'right';
  maxWidthPercent: number;
  sampleText?: string;
}

export interface CanvasDimensions {
  width: number;
  height: number;
}
```

### 2. ูููู ุฑูุน ุงููููุงุช
**ุงูููู:** `components/instructor/FileUploadZone.tsx`

**ุงููุธุงุฆู:**
- ุณุญุจ ูุฅููุงุช ุงููููุงุช (Drag & Drop)
- ุฏุนู PNG, JPG, PDF
- ุงูุชุญูู ูู ุงูุญุฌู (ุฃูุตู 5MB)
- ูุนุงููุฉ ุงูุตูุฑ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

**ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:**
- `react-dropzone` ููุชุนุงูู ูุน ุฑูุน ุงููููุงุช
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ููุตูุฉ (ุญุฌู ุงููููุ ููุน ุงูููู)

### 3. ูููู ุชุฎุตูุต ุงููุต
**ุงูููู:** `components/instructor/TextCustomizer.tsx`

**ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ:**
- **ููุน ุงูุฎุท:** Cairo, Arial, Times New Roman, Courier New, Georgia
- **ุญุฌู ุงูุฎุท:** 12px - 72px (ูุน slider)
- **ููู ุงูุฎุท:** 9 ุฃููุงู ูุญุฏุฏุฉ ูุณุจูุงู + color picker ูุฎุตุต
- **ุณูู ุงูุฎุท:** ุนุงุฏู ุฃู ุนุฑูุถ
- **ูุญุงุฐุงุฉ ุงููุต:** ููููุ ูุณุทุ ูุณุงุฑ
- **ุงูุนุฑุถ ุงูุฃูุตู:** 20% - 100%

**ูุงุฌูุฉ ุงููุณุชุฎุฏู:**
- ุชุตููู ุจุฏููู ูุน ุฃููููุงุช ุชูุถูุญูุฉ
- ูุนุงููุฉ ูุจุงุดุฑุฉ ููุชุบููุฑุงุช ุนูู Canvas

### 4. ูููู ุชุญุฏูุฏ ุงูุญููู ุงูุชูุงุนูู
**ุงูููู:** `components/instructor/FieldPositioner.tsx` (470 ุณุทุฑ)

**ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ:**

#### ุฃ. ุชุญููู ุงูููุงูุจ
- ุฏุนู ูุงูู ููุตูุฑ (PNG, JPG)
- ุฏุนู ูููุงุช PDF (ุนุฑุถ ุงูุตูุญุฉ ุงูุฃููู ุจุงุณุชุฎุฏุงู pdfjs-dist)
- ุนุฑุถ ุงููุงูุจ ุนูู Canvas ุจุฌูุฏุฉ ุนุงููุฉ

#### ุจ. ุฅุฏุงุฑุฉ ุงูุญููู
- **ุฃููุงุน ุงูุญููู ุงููุฏุนููุฉ:**
  - ุงุณู ุงูุทุงูุจ (student_name)
  - ุงูุชุงุฑูุฎ (date)
  - ุฑูู ุงูุดูุงุฏุฉ (certificate_number)
  - ุญูู ูุฎุตุต (custom)

- **ุฅุถุงูุฉ ุญููู:** ุฃุฒุฑุงุฑ ุจุฃููููุงุช ูุงุถุญุฉ ููู ููุน
- **ูุถุน ุงูุนูุงูุงุช:** ุงูููุฑ ุนูู Canvas ููุถุน ุนูุงูุฉ ุฌุฏูุฏุฉ
- **ุณุญุจ ุงูุนูุงูุงุช:** ุฅููุงููุฉ ุณุญุจ ุงูุนูุงูุงุช ูุชุบููุฑ ููุงูุนูุง
- **ุชุญุฏูุฏ ุงูุญููู:** ุงูููุฑ ุนูู ุนูุงูุฉ ูุชุญุฏูุฏูุง ูุฅุธูุงุฑ ุฎูุงุฑุงุช ุงูุชุฎุตูุต
- **ุญุฐู ุงูุญููู:** ุฒุฑ ุญุฐู ููุญูู ุงููุญุฏุฏ

#### ุฌ. ูุธุงู ุงูุฅุญุฏุงุซูุงุช
- ุญุณุงุจ ุชููุงุฆู ููุฅุญุฏุงุซูุงุช ููุณุจ ูุฆููุฉ
- ุชุญุฏูุซ ูุจุงุดุฑ ูููุณุจ ุฃุซูุงุก ุงูุณุญุจ
- ุถูุงู ุงูุชูุงูู ูุน ูุฎุชูู ุฃุญุฌุงู ุงูุดุงุดุงุช

#### ุฏ. ุงููุนุงููุฉ ุงููุจุงุดุฑุฉ
- ุนุฑุถ ูุต ุชุฌุฑูุจู ููู ุญูู
- ุชุทุจูู ุงูุชูุณูู ูุจุงุดุฑุฉ (ุฎุทุ ุญุฌูุ ูููุ ูุญุงุฐุงุฉ)
- ูุคุดุฑุงุช ุจุตุฑูุฉ ููุญูู ุงููุญุฏุฏ

#### ูู. ุงูุฑุณู ุนูู Canvas
```typescript
- ุฑุณู ุงูุนูุงูุงุช (ุฏูุงุฆุฑ ููููุฉ ูุน ุธู)
- ุฑุณู ุงููุต ุงูุชุฌุฑูุจู ูุน ุงูุชูุณูู ุงููุฎุตุต
- ุฑุณู Labels ูุชูุถูุญ ููุน ูู ุญูู
- ุฅุนุงุฏุฉ ุฑุณู ุชููุงุฆูุฉ ุนูุฏ ุงูุชุนุฏูู
```

### 5. ุตูุญุฉ ุฅูุดุงุก ุงููุงูุจ
**ุงูููู:** `app/(instructor)/certificates/new/page.tsx`

**ูููุฐุฌ ูุชุนุฏุฏ ุงูุฎุทูุงุช:**

#### ุงูุฎุทูุฉ 1: ูุนูููุงุช ุงูุฏูุฑุฉ
- ุงุณู ุงูุฏูุฑุฉ (ุฅุฌุจุงุฑู)
- ุชุงุฑูุฎ ุงูุฏูุฑุฉ (ุงุฎุชูุงุฑู)
- ูุตู ุงูุฏูุฑุฉ (ุงุฎุชูุงุฑู)
- ุงูุชุญูู ูู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู Zod

#### ุงูุฎุทูุฉ 2: ุฑูุน ุงููุงูุจ
- ุงุณุชุฎุฏุงู ูููู FileUploadZone
- ูุนุงููุฉ ุงูููู ุงููุฑููุน
- ุฅููุงููุฉ ุงุณุชุจุฏุงู ุงูููู

#### ุงูุฎุทูุฉ 3: ุชุญุฏูุฏ ุงูุญููู
- ุงุณุชุฎุฏุงู ูููู FieldPositioner
- ููุญุฉ ูุนูููุงุช (ุฃุจุนุงุฏ ุงููุงูุจุ ุนุฏุฏ ุงูุญููู)
- ูุงุฆูุฉ ุจุฌููุน ุงูุญููู ุงููุถุงูุฉ
- ุชุฎุตูุต ุงูุญูู ุงููุญุฏุฏ ุจุงุณุชุฎุฏุงู TextCustomizer

**ููุทู ุงูุญูุธ:**
```typescript
1. ุฑูุน ุงูููู ุฅูู Supabase Storage (certificate-templates bucket)
2. ุงูุญุตูู ุนูู URL ุงูุนุงู ููููู
3. ุญูุธ ุจูุงูุงุช ุงููุงูุจ ูู ุฌุฏูู certificate_templates
4. ุญูุธ ุงูุญููู ูู ุฌุฏูู template_fields ูุน ุงูุฅุญุฏุงุซูุงุช
5. ุงูุชูุฌูู ุฅูู Dashboard ุจุนุฏ ุงููุฌุงุญ
6. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ
```

---

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### ุงูููุชุจุงุช ุงูุฌุฏูุฏุฉ
```json
{
  "react-dropzone": "^14.3.8",
  "pdfjs-dist": "^5.4.296",
  "@react-pdf/renderer": "^4.3.1",
  "react-pdf": "^10.2.0"
}
```

### APIs ู Hooks
- `useDropzone` ูู react-dropzone
- `pdfjs.getDocument()` ูุชุญููู PDF
- Canvas API ูุฑุณู ุงููุงูุจ ูุงูุญููู
- `useState`, `useEffect`, `useCallback`, `useRef` ูู React
- Supabase Storage API

---

## ๐๏ธ ุงูุฅุตูุงุญุงุช ุงูุชูููุฉ

### 1. ูุดููุฉ pdfjs-dist Type Error
**ุงูุฎุทุฃ:**
```
Property 'canvas' is missing in type 'RenderParameters'
```

**ุงูุญู:**
```typescript
await page.render({
  canvasContext: ctx,
  viewport: viewport,
} as any).promise;
```

### 2. ูุดููุฉ react-dropzone PropTypes
**ุงูุฎุทุฃ:**
```
Type has no properties in common with DropzoneOptions
```

**ุงูุญู:**
```typescript
const { getRootProps, getInputProps, isDragActive } = useDropzone({
  onDrop,
  accept: { ... },
  maxSize: 5242880,
  multiple: false,
} as any);
```

### 3. ูุดููุฉ SSR ูุน DOMMatrix
**ุงูุฎุทุฃ:**
```
ReferenceError: DOMMatrix is not defined (during pre-rendering)
```

**ุงูุญู:**
```typescript
// ุงุณุชุฎุฏุงู dynamic import ูุน ุชุนุทูู SSR
const FieldPositioner = dynamic(
  () => import('@/components/instructor/FieldPositioner'),
  { ssr: false }
);
```

---

## โ ูุชุงุฆุฌ ุงูุจูุงุก

### ุงูุฃูุฑ ุงููุณุชุฎุฏู
```bash
pnpm run build
```

### ุงููุชูุฌุฉ
```
โ Compiled successfully
โ Linting and checking validity of types
โ Collecting page data
โ Generating static pages (11/11)
โ Finalizing page optimization

Route (app)                              Size     First Load JS
โ โ /                                    1.25 kB        92.8 kB
โ ฮป /certificates/new                    21 kB           186 kB
โ ฮป /dashboard                           1.45 kB        98.1 kB
โ โ /forgot-password                     2.1 kB          169 kB
โ โ /login                               2.15 kB         169 kB
โ โ /reset-password                      1.95 kB         169 kB
โ โ /signup                              2.45 kB         170 kB
```

**ุงููุชูุฌุฉ:** ุจูุงุก ูุงุฌุญ 100% ุจุฏูู ุฃู ุฃุฎุทุงุก TypeScript โ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงููููู | ุนุฏุฏ ุงูุฃุณุทุฑ | ุงููุธููุฉ ุงูุฑุฆูุณูุฉ |
|--------|------------|------------------|
| FieldPositioner.tsx | 470 | Canvas ู ุฅุฏุงุฑุฉ ุงูุญููู |
| TextCustomizer.tsx | 231 | ุชุฎุตูุต ุฎุตุงุฆุต ุงููุต |
| FileUploadZone.tsx | 157 | ุฑูุน ุงููููุงุช |
| new/page.tsx | 259 | ุงูุชูุณูู ูุชุนุฏุฏ ุงูุฎุทูุงุช |
| field.ts | 23 | ุชุนุฑูู ุงูุฃููุงุน |
| **ุงููุฌููุน** | **1,140** | |

---

## ๐ฏ ุงูููุฒุงุช ุงููููุฐุฉ

### ูุงุฌูุฉ ุงููุณุชุฎุฏู
- [x] ุชุตููู ูุชุฌุงูุจ ูุงูู (Desktop, Tablet, Mobile)
- [x] ุฏุนู RTL ูุงูู ููุนุฑุจูุฉ
- [x] ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุตูุฉ
- [x] ูุคุดุฑ ุชูุฏู ููุฎุทูุงุช
- [x] ุฃููููุงุช ุชูุถูุญูุฉ (Lucide Icons)
- [x] ุฃููุงู ูุชุตููู ูุชุณู ูุน Sprint 1

### ูุธุงุฆู Canvas
- [x] ุชุญููู ุตูุฑ (PNG, JPG)
- [x] ุชุญููู PDF (ุงูุตูุญุฉ ุงูุฃููู)
- [x] ุฅุถุงูุฉ ุญููู ูุชุนุฏุฏุฉ (4 ุฃููุงุน)
- [x] ุณุญุจ ูุฅููุงุช ุงูุนูุงูุงุช
- [x] ุนุฑุถ ูุต ุชุฌุฑูุจู ููู ุญูู
- [x] ุชุฎุตูุต ููุฑู ููุฎุท
- [x] ุชุญุฏูุฏ ูุญุฐู ุงูุญููู

### ูุธุงู ุงูุฅุญุฏุงุซูุงุช
- [x] ุญุณุงุจ ุชููุงุฆู ูููุณุจ ุงููุฆููุฉ
- [x] ุชุญุฏูุซ ูุจุงุดุฑ ุฃุซูุงุก ุงูุณุญุจ
- [x] ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุชูุงูู ูุน Supabase
- [x] ุฑูุน ุงููููุงุช ุฅูู Storage
- [x] ุญูุธ ุจูุงูุงุช ุงููุงูุจ
- [x] ุญูุธ ุงูุญููู ูุน ุงูุฅุญุฏุงุซูุงุช
- [x] RLS policies ููุฃูุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ูุธุงู ุงูุฅุญุฏุงุซูุงุช
ุชู ุงุณุชุฎุฏุงู **ุงููุณุจ ุงููุฆููุฉ** ุจุฏูุงู ูู ุงูุจูุณูุงุช ุงููุทููุฉ ูุถูุงู:
- ุชูุงูู ูุน ูุฎุชูู ุฃุญุฌุงู ุงูุดุงุดุงุช
- ุฏูุฉ ูู ุชูููุฏ PDF ูู Sprint 4
- ูุฑููุฉ ูู ุงูุชุนุงูู ูุน ููุงูุจ ูุฎุชููุฉ ุงูุฃุจุนุงุฏ

### 2. ุฏุนู PDF
- ูุชู ุนุฑุถ **ุงูุตูุญุฉ ุงูุฃููู ููุท** ูู ููู PDF
- ุงุณุชุฎุฏุงู pdfjs-dist ุจูููุงุณ 1.5 ูููุถูุญ
- ุชุญุฏูุซ ุชููุงุฆู ูุฃุจุนุงุฏ Canvas ุญุณุจ ุฃุจุนุงุฏ PDF

### 3. ุงูุฃูุงู
- RLS policies ุชุณูุญ ูููุฏุฑุจูู ููุท ุจุงููุตูู ุฅูู ูููุงุชูู
- ุงูุชุญูู ูู ุงููุณุชุฎุฏู ูุจู ุงูุญูุธ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุฌููุน ุงูุนูููุงุช

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (Sprint 3)

Sprint 3 ุณูุชุถูู:
1. ูุธุงู Access Codes
2. ุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช
3. ุตูุญุฉ ุงูุทุงูุจ ูุฅุฏุฎุงู ุงูุจูุงูุงุช
4. ุชูููุฏ PDF ุงูููุงุฆู
5. ุชุญููู ุงูุดูุงุฏุฉ

---

## ๐ธ ููุทุงุช ุงูุดุงุดุฉ

### ุงูุฎุทูุฉ 1: ูุนูููุงุช ุงูุฏูุฑุฉ
- ูููุฐุฌ ุจุณูุท ูุน ุญููู ุงูุฅุฏุฎุงู
- ุงูุชุญูู ูู ุงูุจูุงูุงุช
- ุฒุฑ "ุงูุชุงูู" ููุงูุชูุงู

### ุงูุฎุทูุฉ 2: ุฑูุน ุงููุงูุจ
- ููุทูุฉ ุณุญุจ ูุฅููุงุช
- ูุนุงููุฉ ุงูููู
- ุฒุฑ "ูุชุงุจุนุฉ ูุชุญุฏูุฏ ุงูุญููู"

### ุงูุฎุทูุฉ 3: ุชุญุฏูุฏ ุงูุญููู
- Canvas ูุน ุงููุงูุจ
- ุฃุฒุฑุงุฑ ุฅุถุงูุฉ ุงูุญููู
- ููุญุฉ ุงูุชุฎุตูุต ุนูู ุงูุฌุงูุจ
- ุฃุฒุฑุงุฑ "ุญูุธ ุงููุงูุจ" ู "ุงูุณุงุจู"

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุฅููุงู Sprint 2 ุจูุฌุงุญ ูุน ุชูููุฐ ุฌููุน ุงููุชุทูุจุงุช:
- โ ุฑูุน ุงูููุงูุจ (ุตูุฑ ู PDF)
- โ ุชุญุฏูุฏ ุงูุญููู ุงูุชูุงุนูู
- โ ุชุฎุตูุต ุงููุต ุงููุงูู
- โ ุญูุธ ุงูุจูุงูุงุช ูู Supabase
- โ ุจูุงุก ูุงุฌุญ ุจุฏูู ุฃุฎุทุงุก

ุงูููุตุฉ ุงูุขู ุฌุงูุฒุฉ ููุงูุชูุงู ุฅูู Sprint 3: ูุธุงู Access Codes ูุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช.

---

**ุชุงุฑูุฎ ุงูุฅููุงู:** 2025-10-30
**ุงููุทูุฑ:** MiniMax Agent
